#
# Copyright (C) 2025 - present Instructure, Inc.
#
#     Licensed under the Apache License, Version 2.0 (the "License");
#     you may not use this file except in compliance with the License.
#     You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
#     Unless required by applicable law or agreed to in writing, software
#     distributed under the License is distributed on an "AS IS" BASIS,
#     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#     See the License for the specific language governing permissions and
#     limitations under the License.
#

query SubmissionGradeQuery($userId: ID!, $assignmentId: ID!, $nextCursor: String) {
    submission(userId: $userId, assignmentId: $assignmentId) {
        gradingStatus
        grade
        gradeHidden
        hideGradeFromStudent
        _id
        submissionStatus
        status
        latePolicyStatus
        late
        secondsLate
        deductedPoints
        score
        excused
        enteredGrade
        enteredScore
        submittedAt
        assignment {
            dueAt
            gradingType
            pointsPossible
            gradingStandard {
                data {
                    baseValue
                    letterGrade
                }
            }
            course {
                customGradeStatusesConnection(after: $nextCursor) {
                    edges {
                        node {
                            color
                            name
                            id
                            _id
                        }
                    }
                    pageInfo {
                        endCursor
                        hasNextPage
                    }
                }
                gradingStandard {
                    data {
                        baseValue
                        letterGrade
                    }
                }
                gradeStatuses
            }
        }
    }
}

mutation UpdateSubmissionGradeMutation($score: Int!, $submissionId: ID!) {
    updateSubmissionGrade(input: {score: $score, submissionId: $submissionId}) {
        submission {
            gradingStatus
            grade
            gradeHidden
            _id
            submissionStatus
            status
            latePolicyStatus
            late
            secondsLate
            deductedPoints
            score
            enteredGrade
            enteredScore
            assignment {
                gradingType
                pointsPossible
                course {
                    gradingStandard {
                        data {
                            baseValue
                            letterGrade
                        }
                    }
                    gradeStatuses
                }
            }
        }
    }
}

mutation UpdateSubmissionStatusMutation($submissionId: ID!, $customGradeStatusId: ID, $latePolicyStatus: String) {
    updateSubmissionGradeStatus(
        input: {submissionId: $submissionId, customGradeStatusId: $customGradeStatusId, latePolicyStatus: $latePolicyStatus}
    ) {
        submission {
            excused
            status
            grade
            enteredGrade
            enteredScore
            score
            secondsLate
            deductedPoints
        }
    }
}